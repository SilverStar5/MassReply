'use strict';
class _GApi {
    constructor() {
        // gapi.load('client', {
        // 	callback: () => {
        // 		console.log('success')
        // 	}, 
        // })
        (async function() {
            var d = await GStorage.get('oauth2_token')
            gapi.client.init({
                'apiKey': 'AIzaSyDF0owGUwh0D_5CWXw300m1tAFI1eXc5As',
                // Your API key will be automatically added to the Discovery Document URLs.
                // 'discoveryDocs': ['https://people.googleapis.com/$discovery/rest'],
                // clientId and scope are optional if auth is not required.
                'clientId': '1038771980411-kmqg68fpjkdcf3k7b6nnjv15cps29nej.apps.googleusercontent.com',
                'scope': 'https://mail.google.com/',
            }).then(function() {
                gapi.client.setToken({
                    access_token: d.oauth2_token
                })
                // 3. Initialize and make the API request.
                return gapi.client.people.people.get({
                    'resourceName': 'people/me',
                    'requestMask.includeField': 'person.names'
                });
            }).then(function(response) {
                console.log(response.result);
            }, function(reason) {
                console.log('Error: ' + reason.result.error.message);
            });
        })()
    }
}